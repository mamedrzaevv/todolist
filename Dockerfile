# Используем официальный образ с JDK 22
FROM openjdk:22-jdk

# Указываем рабочую директорию в контейнере
WORKDIR /app

# Копируем весь проект в контейнер
COPY . .

# Запускаем сборку через Maven (без тестов)
RUN ./mvnw package -DskipTests

# Копируем скомпилированный JAR-файл
RUN mv target/*.jar app.jar

# Открываем порт (если приложение слушает 8080)
EXPOSE 8081

# Определяем команду для запуска
CMD ["java", "-jar", "app.jar"]